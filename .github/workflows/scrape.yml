name: Scrape Badi

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build-run-and-commit:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v2

    - name: Build Docker image
      run: |
        docker build -t my-scraper-image .

    - name: Run Docker container
      run: |
        docker run --rm --name my-scraper-container my-scraper-image

    - name: Commit and push data/out.csv
      uses: github-actions-x/commit@v2.9
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
        push-branch: 'main'
        commit-message: 'Update data/out.csv'
        force-add: 'true'
        files: data/out.csv
        name: GitHub Actions
        email: actions@github.com